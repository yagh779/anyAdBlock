#!/system/bin/sh

# 兼容模式
# 0 为关闭兼容模式，此时劫持dns
# 1 为开启兼容模式，此时不劫持dns，仅拉起核心
compatible_mode="0"

# ${run_mode}可选值 0 1
# 0为仅启动下方的${bin_name}
# 1为启动adgh+mosdns，此时mosdns做adgh的上游
run_mode="0"

# 运行核心名称，请严格遵循${bin_name_list}的命名格式
bin_name="adgh"

# 目前模块支持的核心
bin_name_list=("mosdns" "adgh")

# ipv6开关，一般情况下建议禁用（如果内核支持ip6tables nat可以打开，否则会漏dns）
# 可选值 disable enable
ipv6="disable"

# dns重定向端口，请保持与核心配置监听端口一致
dns_redirect_port="5353"

# 目的私有地址绕过
intranet=(0.0.0.0/8 10.0.0.0/8 100.0.0.0/8 127.0.0.0/8 169.254.0.0/16 192.0.0.0/24 192.0.2.0/24 192.88.99.0/24 192.168.0.0/16 198.51.100.0/24 203.0.113.0/24 224.0.0.0/4 240.0.0.0/4 255.255.255.255/32)
intranet6=(::/128 ::1/128 ::ffff:0:0/96 100::/64 64:ff9b::/96 2001::/32 2001:10::/28 2001:20::/28 2001:db8::/32 2002::/16 fe80::/10 ff00::/8)

# Android User:Package Name, For example:
# user_packages_list=("0:com.android.captiveportallogin" "10:com.tencent.mm")
user_packages_list=()

# 是否开启定时更新 mosdns rules
# true 开启 ;false 关闭
up_mosrule="false"

# cron 定时更新，运行更新脚本，脚本位于/data/adb/aab/scripts/update-mosrule.sh
# 仅在${up_mosrule}为true时启用，且脚本需按需更改，默认为更新easymosdns官方示例规则
# 默认每周六早上5点更新规则
# 遵循cron表达式 minute hour day month weekday
# 简易生成网站 crontab.guru
up_time="0 5 * * 6"

# 下方配置如无必要不要私自更改
aab_user_group="root:net_admin"
aab_path="/data/adb/aab"
bin_path="${aab_path}/bin/${bin_name}"
run_path="${aab_path}/run"
pid_file="${run_path}/${bin_name}.pid"

# 硬编码，核心及路径暂时写死
adgh_path="${aab_path}/bin/adgh"
mosdns_path="${aab_path}/bin/mosdns"
adgh_pid_file="${run_path}/adgh.pid"
mosdns_pid_file="${run_path}/mosdns.pid"
